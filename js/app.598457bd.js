(function(){"use strict";var e={1514:function(e,t,r){var n=r(9963),i=r(9669),a=r.n(i),o=r(2262),s=r(6252),c=(r(2087),r(3577));const l={class:"card__image"},u=["srcset"],d=["alt","src"],_={class:"details__heading"},g={class:"details__description-list details__info-1"},m=(0,s._)("dt",{class:"details__description-term"},"Native Name",-1),p={class:"details__description-details"},f=(0,s._)("dt",{class:"details__description-term"},"Population",-1),v={class:"details__description-details"},h=(0,s._)("dt",{class:"details__description-term"},"Region",-1),w={class:"details__description-details"},y=(0,s._)("dt",{class:"details__description-term"},"Sub Region",-1),b={class:"details__description-details"},C=(0,s._)("dt",{class:"details__description-term"},"Capital",-1),k={class:"details__description-details"},L={class:"details__description-list details__info-2"},D=(0,s._)("dt",{class:"details__description-term"},"Top Level Domains",-1),N={class:"details__description-details"},B=(0,s._)("dt",{class:"details__description-term"},"Currencies",-1),M={class:"details__description-details"},O=(0,s._)("dt",{class:"details__description-term"},"Languages",-1),S={class:"details__description-details"};function F(e,t,r,n,i,a){const o=(0,s.up)("ButtonBack"),F=(0,s.up)("BaseDetails");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(o),(0,s.Wm)(F,null,{default:(0,s.w5)((()=>[(0,s._)("picture",l,[(0,s._)("source",{srcset:n.flags.svg,type:"image/svg+xml"},null,8,u),(0,s._)("img",{alt:`Flag of ${n.commonName}`,class:"image",src:n.flags.png},null,8,d)]),(0,s._)("h2",_,(0,c.zw)(n.commonName),1),(0,s._)("dl",g,[m,(0,s._)("dd",p,(0,c.zw)(n.valueOrNA(n.nativeNames)),1),f,(0,s._)("dd",v,(0,c.zw)(n.formatNumber(n.population)),1),h,(0,s._)("dd",w,(0,c.zw)(n.valueOrNA(n.region)),1),y,(0,s._)("dd",b,(0,c.zw)(n.valueOrNA(n.subregion)),1),C,(0,s._)("dd",k,(0,c.zw)(n.valueOrNA(n.capital)),1)]),(0,s._)("dl",L,[D,(0,s._)("dd",N,(0,c.zw)(n.valueOrNA(n.domains)),1),B,(0,s._)("dd",M,(0,c.zw)(n.valueOrNA(n.currencies)),1),O,(0,s._)("dd",S,(0,c.zw)(n.valueOrNA(n.languages)),1)])])),_:1})],64)}const A=(0,s._)("span",{class:"button__icon","aria-hidden":"true"},null,-1),j=(0,s._)("span",{class:"button__copy"},"Back",-1),R=[A,j];function V(e,t,r,n,i,a){return(0,s.wg)(),(0,s.iD)("button",{class:"button button--back",onClick:t[0]||(t[0]=(...e)=>n.changeToHomeView&&n.changeToHomeView(...e))},R)}function T(e,t,r,n,i,a){const o=(0,s.up)("Navigation"),c=(0,s.up)("List");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(o),(0,s.Wm)(c)],64)}const z={"aria-label":"Country List",class:"list"},W={key:0,class:"list__empty"},x=["id"],H={class:"card__image"},Z=["srcset"],$=["alt","src"],q={class:"card__description-list"},E=(0,s._)("dt",{class:"card__description-term"},"Population",-1),I={class:"card__description-details"},K=(0,s._)("dt",{class:"card__description-term"},"Region",-1),P={class:"card__description-details"},Y=(0,s._)("dt",{class:"card__description-term"},"Capital",-1),U={class:"card__description-details"},X={ref:"sentinel",class:"list__sentinel","aria-hidden":"true"};function G(e,t,r,n,i,a){const o=(0,s.up)("Card");return(0,s.wg)(),(0,s.iD)("section",z,[n.isCountriesEmpty?((0,s.wg)(),(0,s.iD)("p",W," There are no countries that match these criteria. ")):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.countries,((e,t)=>((0,s.wg)(),(0,s.j4)(o,{key:t,code:e.cca3,ariaLabelledBy:`country-card-${t}`},{default:(0,s.w5)((()=>[(0,s._)("h2",{class:"card__heading",id:`country-card-${t}`},(0,c.zw)(e.name.common),9,x),(0,s._)("picture",H,[(0,s._)("source",{srcset:e.flags.svg,type:"image/svg+xml"},null,8,Z),(0,s._)("img",{alt:`Flag of ${e.name.common}`,class:"image",src:e.flags.png},null,8,$)]),(0,s._)("dl",q,[E,(0,s._)("dd",I,(0,c.zw)(n.formatNumber(e.population)),1),K,(0,s._)("dd",P,(0,c.zw)(n.valueOrNA(e.region)),1),Y,(0,s._)("dd",U,(0,c.zw)(n.valueOrNA(e.capital)),1)])])),_:2},1032,["code","ariaLabelledBy"])))),128)),(0,s._)("div",X,null,512)])}var J=r(8743);const Q=["aria-labelledby"];function ee(e,t,r,i,a,o){return(0,s.wg)(),(0,s.iD)("a",{class:"link list__link",href:"#",onClick:t[0]||(t[0]=(0,n.iM)((e=>i.setCountryToView(r.code)),["prevent"]))},[(0,s._)("article",{class:"list__card card","aria-labelledby":r.ariaLabelledBy},[(0,s.WI)(e.$slots,"default")],8,Q)])}var te={name:"ListCard",props:{ariaLabelledBy:{type:String,required:!0},code:{type:String,required:!0}},setup(){const{setCountryToView:e}=at();return{setCountryToView:e}}},re=r(3744);const ne=(0,re.Z)(te,[["render",ee]]);var ie=ne,ae={name:"BaseList",components:{Card:ie},setup(){const{state:e,filteredByRegion:t,filteredBySearch:r,formatNumber:n,increaseListLimit:i,requestAllCountries:a,resetListLimit:c,setCurrentRegion:l,setCurrentSearch:u,valueOrNA:d}=at(),{currentRegion:_,currentSearch:g,countries:m,listLimit:p}=(0,o.BK)(e);0===m.value.length&&a(),l(null),u("");const f=(0,s.Fl)((()=>t.value.filter((({cca3:e})=>r.value.find((({cca3:t})=>t===e)))).slice(0,p.value-1))),v=(0,s.Fl)((()=>0===f.value.length));(0,s.YP)([_,g],(()=>{c(p.value)}));const h=(0,o.iH)(null);return(0,s.bv)((()=>{const e=10,t="250px";(0,J.S1d)(h,(([{isIntersecting:t}])=>{t&&i(e)}),{rootMargin:t})})),(0,s.Ah)((()=>{c()})),{countries:f,isCountriesEmpty:v,sentinel:h,formatNumber:n,valueOrNA:d}}};const oe=(0,re.Z)(ae,[["render",G]]);var se=oe;const ce={class:"navigation"};function le(e,t,r,n,i,a){const o=(0,s.up)("NavigationSearch"),c=(0,s.up)("NavigationFilter");return(0,s.wg)(),(0,s.iD)("nav",ce,[(0,s.Wm)(o),(0,s.Wm)(c)])}const ue={ref:"filter",class:"navigation__filter filter"},de=["aria-expanded"],_e={class:"button__copy"},ge=(0,s._)("span",{class:"button__icon","aria-hidden":"true"},null,-1),me=["data-value"];function pe(e,t,r,i,a,o){return(0,s.wg)(),(0,s.iD)("div",ue,[(0,s._)("button",{"aria-expanded":i.isExpanded,"aria-controls":"filter__menu",class:"button filter__button",onClick:t[0]||(t[0]=(...e)=>i.toggleMenu&&i.toggleMenu(...e))},[(0,s._)("span",_e,(0,c.zw)(i.filterCopy),1),ge],8,de),(0,s._)("div",{class:(0,c.C_)(["filter__menu",{"filter__menu--expanded":i.isExpanded}]),id:"filter__menu",role:"menu"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.regions,((e,r)=>((0,s.wg)(),(0,s.iD)("a",{key:r,class:"filter__item","data-value":e,href:"#",role:"menuitem",onClick:t[1]||(t[1]=(0,n.iM)(((...e)=>i.setRegionFilter&&i.setRegionFilter(...e)),["prevent"]))},(0,c.zw)(e),9,me)))),128))],2)],512)}var fe={name:"NavigationFilter",setup(){const e=(0,o.iH)(!1),t=(0,o.iH)(null),{state:r,setCurrentRegion:n}=at(),{countries:i,currentRegion:a}=(0,o.BK)(r),c=(0,s.Fl)((()=>{const e="Filter by Region";return a.value??e})),l=(0,s.Fl)((()=>{const e=new Set;return i.value.forEach((t=>{t.region&&e.add(t.region)})),Array.from(e).sort()})),u=e=>{const t=e.target.querySelector("input");t&&t.focus()},d=e=>{n(e.target.dataset.value),_()},_=()=>{e.value=!e.value};return(0,J.i9H)(t,(()=>{e.value&&_()})),{filter:t,filterCopy:c,isExpanded:e,regions:l,addFocusWithin:u,setRegionFilter:d,toggleMenu:_}}};const ve=(0,re.Z)(fe,[["render",pe]]);var he=ve;const we=(0,s._)("span",{class:"search__icon","aria-hidden":"true"},null,-1);function ye(e,t,r,i,a,o){return(0,s.wg)(),(0,s.iD)("div",{class:"navigation__search search",onClick:t[1]||(t[1]=(...e)=>i.addFocusWithin&&i.addFocusWithin(...e))},[we,(0,s._)("input",{"aria-label":"Search for a country",class:"search__input",placeholder:"Search for a countryâ€¦",type:"text",onInput:t[0]||(t[0]=(0,n.iM)(((...e)=>i.search&&i.search(...e)),["stop"]))},null,32)])}var be={name:"NavigationSearch",setup(){const{setCurrentSearch:e}=at(),t=e=>{const t=e.target.querySelector("input");t&&t.focus()},r=t=>{e(t.target.value)};return{addFocusWithin:t,search:r}}};const Ce=(0,re.Z)(be,[["render",ye]]);var ke=Ce,Le={name:"BaseNavigation",components:{NavigationFilter:he,NavigationSearch:ke}};const De=(0,re.Z)(Le,[["render",le]]);var Ne=De,Be={name:"ViewHome",components:{List:se,Navigation:Ne}};const Me=(0,re.Z)(Be,[["render",T]]);var Oe=Me,Se={name:"ButtonBack",setup(){const{changeCurrentView:e}=at(),t=()=>{e(Oe)};return{changeToHomeView:t}}};const Fe=(0,re.Z)(Se,[["render",V]]);var Ae=Fe;const je={class:"details"};function Re(e,t,r,n,i,a){const o=(0,s.up)("BorderCountryLink"),l=(0,s.up)("BorderCountriesList");return(0,s.wg)(),(0,s.iD)("section",je,[(0,s.WI)(e.$slots,"default"),n.borders.length>0?((0,s.wg)(),(0,s.j4)(l,{key:0},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.borders,((e,t)=>((0,s.wg)(),(0,s.j4)(o,{key:t,code:e.cca3,title:e.name.common},{default:(0,s.w5)((()=>[(0,s.Uk)((0,c.zw)(e.name.common),1)])),_:2},1032,["code","title"])))),128))])),_:1})):(0,s.kq)("",!0)])}const Ve={class:"details__border-countries border-countries"},Te=(0,s._)("h3",{class:"border-countries__heading"},"Border Countries",-1);function ze(e,t,r,n,i,a){return(0,s.wg)(),(0,s.iD)("nav",Ve,[Te,(0,s.WI)(e.$slots,"default")])}var We={name:"BorderCountriesList"};const xe=(0,re.Z)(We,[["render",ze]]);var He=xe;const Ze=["title"];function $e(e,t,r,i,a,o){return(0,s.wg)(),(0,s.iD)("a",{class:"link border-countries__link",href:"#",title:r.title,onClick:t[0]||(t[0]=(0,n.iM)((e=>i.setCountryToView(r.code)),["prevent"]))},[(0,s.WI)(e.$slots,"default")],8,Ze)}var qe={name:"BorderCountryLink",props:{code:{type:String,required:!0},title:{type:String,required:!0}},setup(){const{setCountryToView:e}=at();return{setCountryToView:e}}};const Ee=(0,re.Z)(qe,[["render",$e]]);var Ie=Ee,Ke={name:"BaseDetails",components:{BorderCountriesList:He,BorderCountryLink:Ie},setup(){const{getBorderCountries:e}=at(),t=e();return{borders:t}}};const Pe=(0,re.Z)(Ke,[["render",Re]]);var Ye=Pe,Ue={name:"ViewCountry",components:{ButtonBack:Ae,BaseDetails:Ye},setup(){const{currentCountry:e,formatNumber:t,valueOrNA:r}=at(),{capital:n,currencies:i,tld:a,flags:o,languages:c,name:l,population:u,region:d,subregion:_}=e.value,g=(0,s.Fl)((()=>Object.values(i).map((e=>`${e.name} (${e.symbol})`)).sort().join(", "))),m=(0,s.Fl)((()=>a.map((e=>e)).sort().join(", "))),p=(0,s.Fl)((()=>Object.values(c).sort().join(", "))),f=(0,s.Fl)((()=>l.common)),v=(0,s.Fl)((()=>Object.values(l.nativeName).map((e=>e.common)).sort().join(", ")));return{capital:n,currencies:g,domains:m,flags:o,languages:p,commonName:f,nativeNames:v,population:u,region:d,subregion:_,formatNumber:t,valueOrNA:r}}};const Xe=(0,re.Z)(Ue,[["render",F]]);var Ge=Xe;const Je=20,Qe="restApiCountries_darkMode",et=a().create({baseURL:"https://restcountries.com/v3.1"}),tt=({nativeName:e=null})=>null!==e,rt=e=>{localStorage.setItem(Qe,e?"dark":"no-preference")},nt=Symbol("store"),it=()=>{const e=(0,o.qj)({countries:[],currentCode:null,currentRegion:null,currentSearch:"",currentView:(0,o.Xl)(Oe),isDarkMode:!1,isLoading:!1,listLimit:Je}),t=(0,s.Fl)((()=>e.countries.find((({cca3:t})=>t===e.currentCode)))),r=(0,s.Fl)((()=>null!==e.currentRegion?e.countries.filter((({region:t})=>t===e.currentRegion)):e.countries)),n=(0,s.Fl)((()=>{const t=new RegExp(e.currentSearch.split("").join(".*"),"i");return""!==e.currentSearch.trim()?e.countries.filter((({name:e})=>t.test(e.common))):e.countries}));function i(t){e.currentView=(0,o.Xl)(t)}function a(e){return e.toLocaleString("en-US")}function c(){return e.countries.filter((({cca3:e})=>!!t.value.borders&&t.value.borders.includes(e)))}function l(t){e.listLimit=e.listLimit+t}async function u(){e.isLoading=!0;const t=["cca3","flags","name","population","region","capital"];let r=[];try{({data:r}=await et.get(`/all?fields=${t.join(",")}`))}catch(n){({data:r}=await et.get("/data/countries.json",{baseURL:"/rest-countries-api-with-color-theme-switcher/"}))}e.isLoading=!1,e.countries=r}async function d(){if(!tt(t.value)){const n=["borders","currencies","tld","languages","subregion"];let i=[];try{({data:i}=await et.get(`/alpha/${e.currentCode.toLowerCase()}?fields=${n.join(",")}`))}catch(r){({data:i}=await et.get("/data/countries.json",{baseURL:"/rest-countries-api-with-color-theme-switcher/"})),i=i.find((t=>t.cca3.toLowerCase()===e.currentCode.toLowerCase()))}for(const e in i)t.value[e]=i[e]}}function _(){e.listLimit=Je}async function g(t){e.isLoading=!0,e.currentCode=t,await d(),e.currentView!==Ge&&i(Ge),e.isLoading=!1}function m(t){e.currentRegion=t}function p(t){e.currentSearch=t}function f(){const t=localStorage.getItem(Qe);(t&&"dark"===t||!t&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&!e.isDarkMode&&v(),t||rt(e.isDarkMode)}function v(){e.isDarkMode=!e.isDarkMode,rt(e.isDarkMode)}function h(e){return Array.isArray(e)&&(e=e.join(", ")),e?e.trim():"N/A"}return{state:(0,o.OT)(e),currentCountry:t,filteredByRegion:r,filteredBySearch:n,changeCurrentView:i,formatNumber:a,getBorderCountries:c,increaseListLimit:l,requestAllCountries:u,requestCountryDetails:d,resetListLimit:_,setCountryToView:g,setCurrentRegion:m,setCurrentSearch:p,setModeToAgentPref:f,toggleDarkMode:v,valueOrNA:h}},at=()=>(0,s.f3)(nt),ot={class:"header"},st=(0,s._)("h1",{class:"header__heading"},"Where in the world?",-1),ct={key:0,class:"loader"};function lt(e,t,r,n,i,a){const o=(0,s.up)("ButtonDarkMode");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("header",ot,[st,(0,s.Wm)(o)]),(0,s._)("main",null,[n.isLoading?((0,s.wg)(),(0,s.iD)("div",ct)):((0,s.wg)(),(0,s.j4)((0,s.LL)(n.currentView),{key:1}))])],64)}const ut=(0,s._)("span",{class:"button__icon","aria-hidden":"true"},null,-1),dt=(0,s._)("span",{class:"button__copy"},"Dark Mode",-1),_t=[ut,dt];function gt(e,t,r,i,a,o){return(0,s.wg)(),(0,s.iD)("button",{class:"button header__button--dark-mode",onClick:t[0]||(t[0]=(0,n.iM)(((...e)=>i.toggleDarkMode&&i.toggleDarkMode(...e)),["stop"]))},_t)}const mt=document.documentElement,pt="html--dark-mode";var ft={name:"ButtonDarkMode",setup(){const{state:e,setModeToAgentPref:t,toggleDarkMode:r}=at(),{isDarkMode:n}=(0,o.BK)(e);return t(),(0,s.m0)((()=>{n.value?mt.classList.add(pt):mt.classList.remove(pt)})),{toggleDarkMode:r}}};const vt=(0,re.Z)(ft,[["render",gt]]);var ht=vt,wt={name:"App",components:{ButtonDarkMode:ht},setup(){const{state:e}=at(),{currentView:t,isLoading:r}=(0,o.BK)(e);return{currentView:t,isLoading:r}}};const yt=(0,re.Z)(wt,[["render",lt]]);var bt=yt;(0,n.ri)(bt).provide(nt,it()).mount(".whole-document")}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.m=e,function(){var e=[];r.O=function(t,n,i,a){if(!n){var o=1/0;for(u=0;u<e.length;u++){n=e[u][0],i=e[u][1],a=e[u][2];for(var s=!0,c=0;c<n.length;c++)(!1&a||o>=a)&&Object.keys(r.O).every((function(e){return r.O[e](n[c])}))?n.splice(c--,1):(s=!1,a<o&&(o=a));if(s){e.splice(u--,1);var l=i();void 0!==l&&(t=l)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,i,a]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,a,o=n[0],s=n[1],c=n[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)r.o(s,i)&&(r.m[i]=s[i]);if(c)var u=c(r)}for(t&&t(n);l<o.length;l++)a=o[l],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(u)},n=self["webpackChunkrest_countries_api_with_color_theme_switcher"]=self["webpackChunkrest_countries_api_with_color_theme_switcher"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=r.O(void 0,[998],(function(){return r(1514)}));n=r.O(n)})();
//# sourceMappingURL=app.598457bd.js.map